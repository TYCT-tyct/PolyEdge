[maker]
base_quote_size = 1.0
min_edge_bps = 1.0
inventory_skew = 0.15
max_spread = 0.08
ttl_ms = 500

[taker]
trigger_bps = 4.0
max_slippage_bps = 50.0
stale_tick_filter_ms = 120
market_tier_profile = "balanced_sol_guard"

[online_calibration]
capital_fraction_kelly = 0.35
variance_penalty_lambda = 0.25
min_eval_notional_usdc = 0.01
min_expected_edge_usdc = 0.0002

[fair_value.basis_mr]
enabled = true
alpha_mean = 0.08
alpha_var = 0.1
alpha_ret = 0.15
alpha_vol = 0.12
k_revert = 0.85
z_cap = 3.0
min_confidence = 0.05
warmup_ticks = 24

[robust_stats]
enabled = true
outlier_method = "iqr"
iqr_k = 1.5
min_samples = 5

[predator_c]
enabled = true
priority = "taker_only"

[predator_c.direction_detector]
window_max_sec = 120
threshold_5m_pct = 0.001
threshold_15m_pct = 0.002
threshold_1h_pct = 0.05
threshold_1d_pct = 0.1
lookback_short_sec = 10
lookback_long_sec = 30
min_sources_for_high_confidence = 1
min_ticks_for_signal = 3
min_consecutive_ticks = 1
min_velocity_bps_per_sec = 0.1
min_acceleration = 0.0
momentum_spike_multiplier = 1.0
min_tick_rate_spike_ratio = 1.0
tick_rate_short_ms = 200
tick_rate_long_ms = 1500
fast_confirm_velocity_bps_per_sec = 2.0
enable_source_vote_gate = false
require_secondary_confirmation = false
source_vote_max_age_ms = 5000

[predator_c.probability_engine]
momentum_gain = 2.0
lag_penalty_per_ms = 0.0002
confidence_floor = 0.05
sigma_annual = 0.9
horizon_sec = 30
drift_annual = 0.0
velocity_drift_gain = 0.35
acceleration_drift_gain = 0.02
fair_blend_weight = 0.35

[predator_c.taker_sniper]
min_direction_confidence = 0.08
min_edge_net_bps = 0.5
max_spread = 0.3
cooldown_ms_per_market = 300
min_win_rate_score = 5.0
dynamic_fee_gate_enabled = false
dynamic_fee_gate_scale = 0.05
dynamic_fee_gate_max_confidence_relax = 0.8

[predator_c.regime]
enabled = true
active_min_confidence = 0.15
active_min_magnitude_pct = 0.001
defend_tox_score = 1.0
defend_on_toxic_danger = false
defend_min_source_health = 0.1
quiet_min_edge_multiplier = 0.8
quiet_chunk_scale = 1.0

[predator_c.cross_symbol]
enabled = true
leader_symbol = "BTCUSDT"
follower_symbols = [
    "ETHUSDT",
    "SOLUSDT",
]
min_leader_confidence = 0.8
min_leader_magnitude_pct = 0.12
follower_stale_confidence_max = 0.65
max_correlated_positions = 2

[predator_c.gatling]
enabled = true
chunk_notional_usdc = 5.0
min_chunks = 1
max_chunks = 4
spacing_ms = 12
stop_on_reject = true

[predator_c.gatling_symbols.BTCUSDT]
chunk_notional_usdc = 8.0
min_chunks = 1
max_chunks = 4
spacing_ms = 10

[predator_c.gatling_symbols.ETHUSDT]
chunk_notional_usdc = 5.0
min_chunks = 1
max_chunks = 4
spacing_ms = 12

[predator_c.gatling_symbols.SOLUSDT]
chunk_notional_usdc = 3.0
min_chunks = 1
max_chunks = 5
spacing_ms = 14

[predator_c.gatling_symbols.XRPUSDT]
chunk_notional_usdc = 2.0
min_chunks = 1
max_chunks = 6
spacing_ms = 14

[predator_c.strategy_d]
enabled = false
min_gap_bps = 25.0
min_edge_net_bps = 12.75
min_confidence = 0.65
max_notional_usdc = 25.0
cooldown_ms_per_market = 500

[predator_c.exit]
enabled = true
t100ms_reversal_bps = -3.0
t300ms_reversal_bps = -2.0
convergence_exit_ratio = 0.85
time_stop_ms = 300000
edge_decay_bps = -2.0
adverse_move_bps = -8.0
t3_take_ratio = 0.6
t15_min_unrealized_usdc = 0.0
t60_true_prob_floor = 0.7
t300_force_exit_ms = 300000
t300_hold_prob_threshold = 0.95
t300_hold_time_to_expiry_ms = 300000
max_single_trade_loss_usdc = 1.0
flatten_on_trigger = true

[predator_c.router]
max_locked_pct_5m = 0.3
max_locked_pct_15m = 0.4
max_locked_pct_1h = 0.5
max_locked_pct_1d = 0.3
max_concurrent_positions = 8
liquidity_reserve_pct = 0.2
max_order_notional_usdc = 2.0
max_total_notional_usdc = 10.0

[predator_c.compounder]
enabled = true
initial_capital_usdc = 10.0
compound_ratio = 1.0
position_fraction = 0.8
min_quote_size = 1.0
daily_loss_cap_usdc = 0.5

[v52.time_phase]
early_min_ratio = 0.55
late_max_ratio = 0.1
early_size_scale = 1.0
maturity_size_scale = 1.0
late_size_scale = 0.1
allow_timeframes = [
    "5m",
    "15m",
]

[v52.execution]
late_force_taker_remaining_ms = 30000
maker_wait_ms_before_force = 800
apply_force_taker_in_maturity = true
apply_force_taker_in_late = true
alpha_window_enabled = true
alpha_window_move_bps = 3.0
alpha_window_poll_ms = 10
alpha_window_max_wait_ms = 1000
require_compounder_when_live = true

[v52.reversal]
same_market_opposite_first = true

[strategy_engine]
engine_mode = "roll_v1"
enabled_symbols = ["BTC", "ETH", "SOL", "XRP"]
enabled_timeframes = ["5m", "15m"]
market_scope = "near_expiry_active_only"

[roll_v1]
enabled = true

[roll_v1.5m]
scan_interval_ms = 40
entry_start_remaining_ms = 150000
entry_end_remaining_ms = 12000
probe_add_pct_min = 0.003
probe_add_pct_max = 0.005
scale_add_pct_min = 0.004
scale_add_pct_max = 0.012
final_add_pct = 0.018
max_position_pct_per_market = 0.055
reverse_velocity_bps_per_sec = -180.0
reverse_persist_ms = 800
reverse_drop_pct = 0.06

[roll_v1.15m]
scan_interval_ms = 40
entry_start_remaining_ms = 420000
entry_end_remaining_ms = 20000
probe_add_pct_min = 0.003
probe_add_pct_max = 0.005
scale_add_pct_min = 0.004
scale_add_pct_max = 0.012
final_add_pct = 0.018
max_position_pct_per_market = 0.055
reverse_velocity_bps_per_sec = -120.0
reverse_persist_ms = 1500
reverse_drop_pct = 0.04

[roll_v1.risk]
daily_loss_stop_pct = 2.0
max_total_exposure_pct = 18.0

[roll_v1.fee_model]
mode = "official_formula"

[roll_v1.reverse]
strong_reversal_velocity_bps_per_sec = -260.0
maker_first_ttl_ms = 400

[fusion]
enable_udp = true
mode = "hyper_mesh"
udp_local_only = true
udp_share_cap = 0.35
jitter_threshold_ms = 25
fallback_arm_duration_ms = 8000
fallback_cooldown_sec = 300
udp_port = 6666
dedupe_window_ms = 2
dedupe_price_bps = 0.02

[source_health]
min_samples = 64
gap_window_ms = 2000
jitter_limit_ms = 10.0
deviation_limit_bps = 30.0
freshness_limit_ms = 1500.0
min_score_for_trading = 0.0

[toxicity]
min_market_score = 0.0
active_top_n_markets = 64

[edge_model]
model = "ev_net"
gate_mode = "dynamic"
version = "v2-ev-net"
base_gate_bps = 0.5
congestion_penalty_bps = 2.0
latency_penalty_bps = 2.0
fail_cost_bps = 1.0

[risk_controls]
enabled = true

[risk_controls.exposure_limits]
max_total_exposure_usdc = 2.0
max_per_market_exposure_usdc = 2.0
max_concurrent_positions = 8

[risk_controls.kill_switch]
max_drawdown_pct = 0.2
max_loss_streak = 5
cooldown_sec = 60

[risk_controls.progressive_limits]
enabled = true
drawdown_tier1_ratio = 0.5
drawdown_tier2_ratio = 0.8
tier1_size_scale = 0.7
tier2_size_scale = 0.4
